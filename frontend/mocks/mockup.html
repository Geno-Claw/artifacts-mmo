<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Artifacts MMO Bot Dashboard - Design Mockups</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
/* ========== RESET & GLOBAL ========== */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Press Start 2P', monospace;
  background-color: #0a0a14;
  background-image:
    linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px);
  background-size: 16px 16px;
  color: #e0e0e0;
  min-height: 100vh;
  image-rendering: pixelated;
  -ms-interpolation-mode: nearest-neighbor;
}

/* ========== PAGE HEADER ========== */
.page-header {
  text-align: center;
  padding: 32px 16px 16px;
}
.page-header h1 {
  font-size: 20px;
  color: #ffd040;
  text-shadow: 2px 2px 0 #805000, 4px 4px 0 #000;
  letter-spacing: 4px;
  margin-bottom: 8px;
}
.page-header h2 {
  font-size: 9px;
  color: #8888aa;
  letter-spacing: 2px;
}

/* ========== TAB BAR ========== */
.tab-bar {
  display: flex;
  justify-content: center;
  gap: 4px;
  padding: 16px;
  flex-wrap: wrap;
}
.tab-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: 10px 16px;
  border: none;
  cursor: pointer;
  background: #1a1a2a;
  color: #666688;
  box-shadow:
    inset -2px -2px 0 #0a0a14,
    inset 2px 2px 0 #2a2a3a;
  transition: none;
  image-rendering: pixelated;
}
.tab-btn:hover {
  color: #aaaacc;
  background: #22223a;
}
.tab-btn.active {
  background: #2a2a4a;
  color: #ffd040;
  box-shadow:
    inset -2px -2px 0 #1a1a3a,
    inset 2px 2px 0 #3a3aaa;
}

/* ========== DESIGN CONTAINERS ========== */
.design-container {
  display: none;
  padding: 16px;
  max-width: 1400px;
  margin: 0 auto;
}
.design-container.active { display: block; }

.design-label {
  text-align: center;
  font-size: 7px;
  color: #666;
  margin-bottom: 20px;
  letter-spacing: 1px;
}

.cards-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
}

/* ========== SHARED PORTRAIT ========== */
canvas.portrait {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor;
}

/* ========== STAT BARS (shared shape) ========== */
.stat-bar-wrap {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 3px 0;
}
.stat-bar-wrap .bar-label {
  font-size: 6px;
  min-width: 20px;
  text-align: right;
}
.stat-bar-track {
  flex: 1;
  height: 10px;
  position: relative;
  overflow: hidden;
}
.stat-bar-fill {
  height: 100%;
  position: absolute;
  left: 0; top: 0;
  transition: width 0.3s steps(10);
}
.stat-bar-text {
  font-size: 5px;
  min-width: 60px;
  text-align: right;
}

/* ========== COOLDOWN ========== */
.cooldown-wrap {
  margin: 6px 0;
}
.cooldown-label {
  font-size: 6px;
  margin-bottom: 3px;
  display: flex;
  justify-content: space-between;
}
.cooldown-track {
  height: 12px;
  position: relative;
  overflow: hidden;
}
.cooldown-fill {
  height: 100%;
  position: absolute;
  left: 0; top: 0;
  transition: width 0.1s linear;
}
.cooldown-fill.done {
  animation: cooldownPulse 0.5s steps(2) infinite;
}

@keyframes cooldownPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* ========== ACTION BUTTONS (shared) ========== */
.action-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  padding: 6px 8px;
  border: none;
  cursor: pointer;
  image-rendering: pixelated;
  transition: none;
  white-space: nowrap;
}

/* ===================================================================
   DESIGN A — ROYAL BLUE (Final Fantasy / Dragon Quest)
   =================================================================== */
.design-a {
  --card-bg: #1c1c5e;
  --card-bg-inner: #24246e;
  --border-bright: #5858cc;
  --border-dark: #0e0e2e;
  --text: #dcdcff;
  --text-dim: #7878aa;
  --accent: #ffd040;
  --hp: #40cc50;
  --xp: #5080ee;
  --cd: #ee8030;
  --cd-done: #40ee60;
  --btn-bg: #2a2a7e;
  --btn-hover: #3838aa;
  --btn-text: #c0c0ff;
  --panel-bg: #14144e;
  --bar-track: #0e0e2e;
}

.design-a .card {
  background: var(--card-bg);
  color: var(--text);
  box-shadow:
    0 0 0 2px var(--border-dark),
    0 0 0 4px var(--border-bright),
    0 0 0 6px var(--border-dark),
    inset 0 0 0 2px var(--border-bright),
    6px 6px 0 rgba(0,0,0,0.5);
  padding: 0;
  width: 420px;
  display: flex;
  flex-direction: column;
}
.design-a .card-top-panel {
  background: var(--panel-bg);
  padding: 8px 10px;
  font-size: 6px;
  color: var(--text-dim);
  border-bottom: 2px solid var(--border-bright);
  min-height: 30px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.design-a .card-top-panel .log-icon { color: var(--accent); }

.design-a .card-main {
  display: flex;
  padding: 10px;
  gap: 12px;
}
.design-a .portrait-frame {
  flex-shrink: 0;
  padding: 4px;
  background: var(--panel-bg);
  box-shadow:
    inset 0 0 0 2px var(--border-bright),
    0 0 0 2px var(--border-dark);
}
.design-a .portrait-frame canvas {
  display: block;
  width: 96px;
  height: 96px;
}
.design-a .card-info {
  flex: 1;
  min-width: 0;
}
.design-a .char-name {
  font-size: 10px;
  color: var(--accent);
  text-shadow: 2px 2px 0 #403000;
  margin-bottom: 2px;
}
.design-a .char-level {
  font-size: 7px;
  color: var(--text-dim);
  margin-bottom: 8px;
}
.design-a .stat-bar-track {
  background: var(--bar-track);
  box-shadow: inset 0 0 0 1px var(--border-bright);
}
.design-a .hp-fill { background: var(--hp); }
.design-a .xp-fill { background: var(--xp); }
.design-a .bar-label { color: var(--text-dim); }
.design-a .stat-bar-text { color: var(--text-dim); }

.design-a .cooldown-track {
  background: var(--bar-track);
  box-shadow: inset 0 0 0 1px var(--border-bright);
}
.design-a .cooldown-fill { background: var(--cd); }
.design-a .cooldown-fill.done { background: var(--cd-done); }
.design-a .cooldown-label { color: var(--text-dim); font-size: 6px; }
.design-a .cooldown-time { color: var(--accent); }

.design-a .btn-row {
  display: flex;
  gap: 2px;
  padding: 8px 10px;
  border-top: 2px solid var(--border-bright);
  flex-wrap: wrap;
}
.design-a .action-btn {
  background: var(--btn-bg);
  color: var(--btn-text);
  box-shadow:
    inset -2px -2px 0 var(--border-dark),
    inset 2px 2px 0 #4040aa;
  flex: 1;
  text-align: center;
  min-width: 60px;
}
.design-a .action-btn:hover {
  background: var(--btn-hover);
  color: #fff;
}
.design-a .action-btn:active {
  box-shadow:
    inset 2px 2px 0 var(--border-dark),
    inset -2px -2px 0 #4040aa;
}

.design-a .card-bottom-panel {
  background: var(--panel-bg);
  padding: 8px 10px;
  font-size: 6px;
  color: var(--text-dim);
  border-top: 2px solid var(--border-bright);
  min-height: 30px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.design-a .card-bottom-panel .task-icon { color: var(--accent); }

/* ===================================================================
   DESIGN B — PARCHMENT (Tactics Ogre / Fire Emblem)
   =================================================================== */
.design-b {
  --card-bg: #c8b888;
  --card-bg-inner: #d8c898;
  --border-outer: #5a4020;
  --border-inner: #8a6a3a;
  --border-highlight: #e8d8b0;
  --text: #2a1a08;
  --text-dim: #6a5a38;
  --accent: #8a2010;
  --hp: #388838;
  --xp: #886828;
  --cd: #a84020;
  --cd-done: #388838;
  --btn-bg: #a89868;
  --btn-hover: #b8a878;
  --btn-text: #2a1a08;
  --panel-bg: #b0a070;
  --bar-track: #8a7a50;
}

.design-b .card {
  background: var(--card-bg);
  color: var(--text);
  box-shadow:
    0 0 0 3px var(--border-outer),
    0 0 0 5px var(--border-inner),
    0 0 0 7px var(--border-outer),
    inset 0 0 0 2px var(--border-highlight),
    inset 0 0 0 4px var(--border-inner),
    8px 8px 0 rgba(0,0,0,0.3);
  width: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0;
}

.design-b .card-banner {
  width: 100%;
  text-align: center;
  padding: 10px 8px 6px;
  background: var(--panel-bg);
  border-bottom: 3px solid var(--border-outer);
  position: relative;
}
.design-b .card-banner::before,
.design-b .card-banner::after {
  content: '';
  display: inline-block;
  width: 8px; height: 8px;
  background: var(--accent);
  box-shadow: 0 0 0 2px var(--border-outer);
  vertical-align: middle;
  margin: 0 8px;
}
.design-b .char-name {
  font-size: 10px;
  color: var(--accent);
  text-shadow: 1px 1px 0 rgba(0,0,0,0.15);
  display: inline;
}
.design-b .char-level {
  font-size: 7px;
  color: var(--text-dim);
  margin-top: 4px;
}

.design-b .portrait-section {
  padding: 12px 0 8px;
}
.design-b .portrait-frame {
  padding: 4px;
  background: var(--panel-bg);
  box-shadow:
    0 0 0 2px var(--border-outer),
    0 0 0 4px var(--border-inner),
    inset 0 0 0 1px var(--border-highlight);
}
.design-b .portrait-frame canvas {
  display: block;
  width: 96px;
  height: 96px;
}

.design-b .stats-section {
  width: calc(100% - 24px);
  padding: 0 0 4px;
}
.design-b .stat-bar-track {
  background: var(--bar-track);
  box-shadow:
    inset 1px 1px 0 rgba(0,0,0,0.3),
    0 1px 0 var(--border-highlight);
}
.design-b .hp-fill { background: var(--hp); }
.design-b .xp-fill { background: var(--xp); }
.design-b .bar-label { color: var(--text-dim); }
.design-b .stat-bar-text { color: var(--text-dim); }

.design-b .cooldown-wrap { width: calc(100% - 24px); }
.design-b .cooldown-track {
  background: var(--bar-track);
  box-shadow: inset 1px 1px 0 rgba(0,0,0,0.3);
}
.design-b .cooldown-fill { background: var(--cd); }
.design-b .cooldown-fill.done { background: var(--cd-done); }
.design-b .cooldown-label { color: var(--text-dim); }
.design-b .cooldown-time { color: var(--accent); }

.design-b .info-panel {
  width: calc(100% - 24px);
  background: var(--panel-bg);
  padding: 8px;
  font-size: 6px;
  color: var(--text-dim);
  box-shadow:
    inset 0 0 0 1px var(--border-inner),
    inset 0 0 0 2px var(--border-highlight);
  margin: 6px 0;
  line-height: 1.6;
}
.design-b .info-panel .panel-icon { color: var(--accent); }

.design-b .btn-row {
  display: flex;
  gap: 3px;
  padding: 10px 12px 12px;
  flex-wrap: wrap;
  justify-content: center;
  width: 100%;
  border-top: 3px solid var(--border-outer);
  background: var(--panel-bg);
}
.design-b .action-btn {
  background: var(--btn-bg);
  color: var(--btn-text);
  box-shadow:
    0 0 0 1px var(--border-outer),
    inset -1px -1px 0 rgba(0,0,0,0.2),
    inset 1px 1px 0 var(--border-highlight);
  flex: 1;
  text-align: center;
  min-width: 48px;
}
.design-b .action-btn:hover {
  background: var(--btn-hover);
}
.design-b .action-btn:active {
  box-shadow:
    0 0 0 1px var(--border-outer),
    inset 1px 1px 0 rgba(0,0,0,0.2),
    inset -1px -1px 0 var(--border-highlight);
}

/* ===================================================================
   DESIGN C — NEON DUNGEON (Cyberpunk Pixel)
   =================================================================== */
.design-c {
  --card-bg: #0c0c18;
  --border-glow: #cc30ee;
  --border-dim: #4a1060;
  --border-inner: #1a1a30;
  --text: #e8e8f0;
  --text-dim: #6868a0;
  --accent: #ff3888;
  --accent2: #30eedd;
  --hp: #30ee70;
  --xp: #8844ff;
  --cd: #ff5030;
  --cd-done: #30eedd;
  --btn-bg: #18182e;
  --btn-hover: #28284e;
  --btn-text: #cc30ee;
  --panel-bg: #101020;
  --bar-track: #1a1a2e;
}

.design-c .card {
  background: var(--card-bg);
  color: var(--text);
  box-shadow:
    0 0 0 1px var(--border-glow),
    0 0 8px var(--border-glow),
    0 0 20px rgba(204,48,238,0.15),
    inset 0 0 0 1px var(--border-dim);
  width: 380px;
  display: flex;
  flex-direction: column;
  padding: 0;
  position: relative;
  overflow: hidden;
}
/* scanline overlay */
.design-c .card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    transparent 0px,
    transparent 2px,
    rgba(0,0,0,0.12) 2px,
    rgba(0,0,0,0.12) 4px
  );
  pointer-events: none;
  z-index: 10;
}

.design-c .card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-glow);
  background: linear-gradient(90deg, rgba(204,48,238,0.1), transparent, rgba(204,48,238,0.1));
}
.design-c .char-name {
  font-size: 10px;
  color: var(--accent2);
  text-shadow: 0 0 8px var(--accent2);
}
.design-c .char-level {
  font-size: 7px;
  color: var(--border-glow);
  text-shadow: 0 0 6px var(--border-glow);
}

.design-c .card-body {
  display: flex;
  gap: 12px;
  padding: 10px 12px;
}
.design-c .portrait-frame {
  flex-shrink: 0;
  padding: 3px;
  background: var(--panel-bg);
  box-shadow:
    0 0 0 1px var(--border-glow),
    0 0 6px rgba(204,48,238,0.3),
    inset 0 0 0 1px var(--border-dim);
}
.design-c .portrait-frame canvas {
  display: block;
  width: 80px;
  height: 80px;
}
.design-c .card-stats {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 2px;
}
.design-c .stat-bar-track {
  background: var(--bar-track);
  box-shadow: 0 0 0 1px var(--border-dim);
}
.design-c .hp-fill {
  background: var(--hp);
  box-shadow: 0 0 4px var(--hp);
}
.design-c .xp-fill {
  background: var(--xp);
  box-shadow: 0 0 4px var(--xp);
}
.design-c .bar-label { color: var(--text-dim); }
.design-c .stat-bar-text { color: var(--text-dim); }

.design-c .cooldown-wrap { padding: 0 12px; }
.design-c .cooldown-track {
  background: var(--bar-track);
  box-shadow: 0 0 0 1px var(--border-dim);
}
.design-c .cooldown-fill {
  background: var(--cd);
  box-shadow: 0 0 4px var(--cd);
}
.design-c .cooldown-fill.done {
  background: var(--cd-done);
  box-shadow: 0 0 6px var(--cd-done);
}
.design-c .cooldown-label { color: var(--text-dim); }
.design-c .cooldown-time {
  color: var(--accent);
  text-shadow: 0 0 6px var(--accent);
}

.design-c .terminal-panel {
  margin: 6px 12px;
  background: var(--panel-bg);
  border: 1px solid var(--border-dim);
  padding: 6px 8px;
  font-size: 6px;
  color: var(--accent2);
  position: relative;
}
.design-c .terminal-panel::before {
  content: '>';
  color: var(--border-glow);
  margin-right: 6px;
}
.design-c .terminal-panel.task-panel {
  color: var(--accent);
}
.design-c .terminal-panel.task-panel::before {
  content: '#';
}

.design-c .btn-row {
  display: flex;
  gap: 2px;
  padding: 8px 12px 10px;
  border-top: 1px solid var(--border-dim);
}
.design-c .action-btn {
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--border-dim);
  flex: 1;
  text-align: center;
  transition: none;
}
.design-c .action-btn:hover {
  background: var(--btn-hover);
  color: var(--accent2);
  border-color: var(--border-glow);
  box-shadow: 0 0 6px rgba(204,48,238,0.3);
}
.design-c .action-btn:active {
  background: var(--border-dim);
}

/* ========== ANIMATIONS ========== */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
.blink { animation: blink 1s steps(1) infinite; }

@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ========== RESPONSIVE ========== */
@media (max-width: 900px) {
  .design-a .card,
  .design-c .card { width: 100%; max-width: 420px; }
  .design-b .card { width: 100%; max-width: 300px; }
}
</style>
</head>
<body>

<div class="page-header">
  <h1>ARTIFACTS MMO</h1>
  <h2>BOT DASHBOARD - DESIGN MOCKUPS</h2>
</div>

<div class="tab-bar">
  <button class="tab-btn active" data-design="a">A: ROYAL BLUE</button>
  <button class="tab-btn" data-design="b">B: PARCHMENT</button>
  <button class="tab-btn" data-design="c">C: NEON DUNGEON</button>
</div>

<div id="design-a" class="design-container design-a active">
  <div class="design-label">DESIGN A — CLASSIC RPG WINDOWS — HORIZONTAL CARDS</div>
  <div class="cards-grid" id="cards-a"></div>
</div>

<div id="design-b" class="design-container design-b">
  <div class="design-label">DESIGN B — MEDIEVAL PARCHMENT — VERTICAL CARDS</div>
  <div class="cards-grid" id="cards-b"></div>
</div>

<div id="design-c" class="design-container design-c">
  <div class="design-label">DESIGN C — NEON DUNGEON — COMPACT DENSE CARDS</div>
  <div class="cards-grid" id="cards-c"></div>
</div>

<script>
// ============================================================
// MOCK DATA
// ============================================================
const characters = [
  {
    name: 'Artifax',
    level: 25,
    hp: 340, maxHp: 450,
    xp: 12500, maxXp: 18000,
    portraitType: 'warrior',
    cooldown: 12.0,
    maxCooldown: 15.0,
    log: 'Fighting Chicken (Lv.3) at (3,2)...',
    task: 'Kill 50 Chickens (32/50)',
  },
  {
    name: 'Luminos',
    level: 18,
    hp: 180, maxHp: 220,
    xp: 8200, maxXp: 12000,
    portraitType: 'mage',
    cooldown: 8.0,
    maxCooldown: 12.0,
    log: 'Crafting Iron Sword at (1,5)...',
    task: 'Craft 10 Iron Swords (7/10)',
  },
  {
    name: 'Verdant',
    level: 22,
    hp: 260, maxHp: 300,
    xp: 15600, maxXp: 20000,
    portraitType: 'gatherer',
    cooldown: 3.0,
    maxCooldown: 8.0,
    log: 'Gathering Ash Wood at (2,0)...',
    task: 'Gather 100 Ash Wood (89/100)',
  },
];

const logMessages = [
  ['Fighting Chicken (Lv.3) at (3,2)...', 'Defeated Chicken! +45 XP', 'Moving to (3,2)...', 'Resting... HP restored'],
  ['Crafting Iron Sword at (1,5)...', 'Iron Sword crafted! +80 XP', 'Withdrawing Iron Ore from bank...', 'Recycling Copper Shield...'],
  ['Gathering Ash Wood at (2,0)...', 'Collected 3x Ash Wood!', 'Depositing items at bank...', 'Moving to (2,0)...'],
];

// ============================================================
// PIXEL ART PORTRAITS
// ============================================================
const PALETTE = {
  '.': null,
  's': '#E8B878', 'S': '#C89858',
  'e': '#1a1a30', 'E': '#303060',
  'm': '#C06050',
  'a': '#8898B0', 'A': '#506070',
  'd': '#D4A840', 'D': '#A08030',
  'r': '#5030A0', 'R': '#7050C0',
  'g': '#50A050', 'G': '#306030',
  'b': '#806040', 'B': '#604028',
  'w': '#F0E8D8', 'W': '#C0B8A0',
  'h': '#402818', 'H': '#5A3820',
  'p': '#E8A0B0',
};

const PORTRAITS = {
  warrior: [
    '..dddddd..',
    '..aaaaaa..',
    '.AaAAAaAa.',
    '.AAAAAAAA.',
    '.AAdddDAA.',
    '..ssssss..',
    '.SseeSeeS.',
    '.ssssssss.',
    '..sSmmsS..',
    '...ssss...',
    '..AAAAAA..',
    '.AAdAAdAA.',
    'AAA.aa.AAA',
    'AA..aa..AA',
  ],
  mage: [
    '....rr....',
    '...rRRr...',
    '..rRRRRr..',
    '.rRRrrRRr.',
    '.RRssssRR.',
    '..ssssss..',
    '.SseeSeeS.',
    '.ssssssss.',
    '..sSmmsS..',
    '...ssss...',
    '..RRRRRR..',
    '.RRRRRRRR.',
    '.Rr.RR.rR.',
    '..r.RR.r..',
  ],
  gatherer: [
    '..GGGGGG..',
    '.GGggggGG.',
    '.GgGssGgG.',
    '.GGssssGG.',
    '..ssssss..',
    '.SseeSeeS.',
    '.ssssssss.',
    '..sSmmsS..',
    '...ssss...',
    '..gggggg..',
    '.ggGbbGgg.',
    '.gG.bb.Gg.',
    '.g..bb..g.',
    '....bb....',
  ],
};

function renderPortrait(canvas, type, bgColor) {
  const data = PORTRAITS[type];
  if (!data) return;
  const h = data.length;
  const w = data[0].length;
  canvas.width = w;
  canvas.height = h;
  const ctx = canvas.getContext('2d');
  if (bgColor) {
    ctx.fillStyle = bgColor;
    ctx.fillRect(0, 0, w, h);
  }
  for (let y = 0; y < h; y++) {
    const row = data[y];
    for (let x = 0; x < row.length; x++) {
      const c = PALETTE[row[x]];
      if (c) {
        ctx.fillStyle = c;
        ctx.fillRect(x, y, 1, 1);
      }
    }
  }
}

// ============================================================
// CARD GENERATORS
// ============================================================

function pct(val, max) {
  return Math.min(100, Math.max(0, (val / max) * 100));
}

function generateCardA(char, idx) {
  return `
    <div class="card" data-idx="${idx}">
      <div class="card-top-panel">
        <span class="log-icon">></span>
        <span class="log-text">${char.log}</span>
      </div>
      <div class="card-main">
        <div class="portrait-frame">
          <canvas class="portrait" data-type="${char.portraitType}" data-bg="#14144e"></canvas>
        </div>
        <div class="card-info">
          <div class="char-name">${char.name}</div>
          <div class="char-level">LV ${char.level}</div>
          <div class="stat-bar-wrap">
            <span class="bar-label">HP</span>
            <div class="stat-bar-track"><div class="stat-bar-fill hp-fill" style="width:${pct(char.hp, char.maxHp)}%"></div></div>
            <span class="stat-bar-text">${char.hp}/${char.maxHp}</span>
          </div>
          <div class="stat-bar-wrap">
            <span class="bar-label">XP</span>
            <div class="stat-bar-track"><div class="stat-bar-fill xp-fill" style="width:${pct(char.xp, char.maxXp)}%"></div></div>
            <span class="stat-bar-text">${char.xp}/${char.maxXp}</span>
          </div>
          <div class="cooldown-wrap">
            <div class="cooldown-label">
              <span>COOLDOWN</span>
              <span class="cooldown-time" data-cd="${idx}">${char.cooldown.toFixed(1)}s</span>
            </div>
            <div class="cooldown-track"><div class="cooldown-fill" data-cd-bar="${idx}" style="width:${pct(char.cooldown, char.maxCooldown)}%"></div></div>
          </div>
        </div>
      </div>
      <div class="btn-row">
        <button class="action-btn">EQUIP</button>
        <button class="action-btn">INVEN</button>
        <button class="action-btn">SKILLS</button>
        <button class="action-btn">STATS</button>
        <button class="action-btn">ACHIEV</button>
      </div>
      <div class="card-bottom-panel">
        <span class="task-icon">#</span>
        <span class="task-text">${char.task}</span>
      </div>
    </div>`;
}

function generateCardB(char, idx) {
  return `
    <div class="card" data-idx="${idx}">
      <div class="card-banner">
        <span class="char-name">${char.name}</span>
        <div class="char-level">LEVEL ${char.level}</div>
      </div>
      <div class="portrait-section">
        <div class="portrait-frame">
          <canvas class="portrait" data-type="${char.portraitType}" data-bg="#a09060"></canvas>
        </div>
      </div>
      <div class="stats-section">
        <div class="stat-bar-wrap">
          <span class="bar-label">HP</span>
          <div class="stat-bar-track"><div class="stat-bar-fill hp-fill" style="width:${pct(char.hp, char.maxHp)}%"></div></div>
          <span class="stat-bar-text">${char.hp}/${char.maxHp}</span>
        </div>
        <div class="stat-bar-wrap">
          <span class="bar-label">XP</span>
          <div class="stat-bar-track"><div class="stat-bar-fill xp-fill" style="width:${pct(char.xp, char.maxXp)}%"></div></div>
          <span class="stat-bar-text">${char.xp}/${char.maxXp}</span>
        </div>
      </div>
      <div class="cooldown-wrap">
        <div class="cooldown-label">
          <span>COOLDOWN</span>
          <span class="cooldown-time" data-cd="${idx}">${char.cooldown.toFixed(1)}s</span>
        </div>
        <div class="cooldown-track"><div class="cooldown-fill" data-cd-bar="${idx}" style="width:${pct(char.cooldown, char.maxCooldown)}%"></div></div>
      </div>
      <div class="info-panel">
        <span class="panel-icon">></span> <span class="log-text">${char.log}</span>
      </div>
      <div class="info-panel">
        <span class="panel-icon">#</span> <span class="task-text">${char.task}</span>
      </div>
      <div class="btn-row">
        <button class="action-btn">EQUIP</button>
        <button class="action-btn">INVEN</button>
        <button class="action-btn">SKILL</button>
        <button class="action-btn">STAT</button>
        <button class="action-btn">ACHV</button>
      </div>
    </div>`;
}

function generateCardC(char, idx) {
  return `
    <div class="card" data-idx="${idx}">
      <div class="card-header">
        <span class="char-name">${char.name}</span>
        <span class="char-level">LV.${char.level}</span>
      </div>
      <div class="card-body">
        <div class="portrait-frame">
          <canvas class="portrait" data-type="${char.portraitType}" data-bg="#0a0a18"></canvas>
        </div>
        <div class="card-stats">
          <div class="stat-bar-wrap">
            <span class="bar-label">HP</span>
            <div class="stat-bar-track"><div class="stat-bar-fill hp-fill" style="width:${pct(char.hp, char.maxHp)}%"></div></div>
            <span class="stat-bar-text">${char.hp}/${char.maxHp}</span>
          </div>
          <div class="stat-bar-wrap">
            <span class="bar-label">XP</span>
            <div class="stat-bar-track"><div class="stat-bar-fill xp-fill" style="width:${pct(char.xp, char.maxXp)}%"></div></div>
            <span class="stat-bar-text">${char.xp}/${char.maxXp}</span>
          </div>
          <div class="cooldown-wrap">
            <div class="cooldown-label">
              <span>CD</span>
              <span class="cooldown-time" data-cd="${idx}">${char.cooldown.toFixed(1)}s</span>
            </div>
            <div class="cooldown-track"><div class="cooldown-fill" data-cd-bar="${idx}" style="width:${pct(char.cooldown, char.maxCooldown)}%"></div></div>
          </div>
        </div>
      </div>
      <div class="terminal-panel">
        <span class="log-text">${char.log}</span>
      </div>
      <div class="terminal-panel task-panel">
        <span class="task-text">${char.task}</span>
      </div>
      <div class="btn-row">
        <button class="action-btn">EQUIP</button>
        <button class="action-btn">INVEN</button>
        <button class="action-btn">SKILL</button>
        <button class="action-btn">STATS</button>
        <button class="action-btn">ACHV</button>
      </div>
    </div>`;
}

// ============================================================
// TAB SWITCHING
// ============================================================
function switchDesign(id) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`.tab-btn[data-design="${id}"]`).classList.add('active');
  document.querySelectorAll('.design-container').forEach(c => c.classList.remove('active'));
  document.getElementById(`design-${id}`).classList.add('active');
}

// ============================================================
// COOLDOWN TIMERS
// ============================================================
const cooldownState = characters.map(c => ({
  current: c.cooldown,
  max: c.maxCooldown,
}));

function tickCooldowns() {
  cooldownState.forEach((cd, idx) => {
    cd.current = Math.max(0, cd.current - 0.1);
    if (cd.current <= 0) {
      // Reset after a brief pause
      setTimeout(() => {
        cd.current = cd.max;
      }, 1500);
    }
    // Update ALL instances of this cooldown (across all 3 designs)
    document.querySelectorAll(`[data-cd="${idx}"]`).forEach(el => {
      if (cd.current <= 0) {
        el.textContent = 'READY';
        el.classList.add('blink');
      } else {
        el.textContent = cd.current.toFixed(1) + 's';
        el.classList.remove('blink');
      }
    });
    document.querySelectorAll(`[data-cd-bar="${idx}"]`).forEach(el => {
      const p = pct(cd.current, cd.max);
      el.style.width = p + '%';
      if (cd.current <= 0) {
        el.classList.add('done');
      } else {
        el.classList.remove('done');
      }
    });
  });
}

// ============================================================
// LOG CYCLING
// ============================================================
const logState = characters.map(() => 0);

function cycleLog(idx) {
  logState[idx] = (logState[idx] + 1) % logMessages[idx].length;
  const msg = logMessages[idx][logState[idx]];
  document.querySelectorAll(`.card[data-idx="${idx}"] .log-text`).forEach(el => {
    el.textContent = msg;
  });
}

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
  // Generate cards
  const gridA = document.getElementById('cards-a');
  const gridB = document.getElementById('cards-b');
  const gridC = document.getElementById('cards-c');

  characters.forEach((char, idx) => {
    gridA.innerHTML += generateCardA(char, idx);
    gridB.innerHTML += generateCardB(char, idx);
    gridC.innerHTML += generateCardC(char, idx);
  });

  // Render portraits
  document.querySelectorAll('canvas.portrait').forEach(canvas => {
    const type = canvas.dataset.type;
    const bg = canvas.dataset.bg || null;
    renderPortrait(canvas, type, bg);
  });

  // Tab buttons
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => switchDesign(btn.dataset.design));
  });

  // Start cooldown timers (100ms tick)
  setInterval(tickCooldowns, 100);

  // Cycle logs every 3 seconds
  characters.forEach((_, idx) => {
    setInterval(() => cycleLog(idx), 3000 + idx * 500);
  });
});
</script>
</body>
</html>
